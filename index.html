<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuirkyShare | Cross-Platform Swap</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Space+Grotesk', sans-serif; background-color: #f0f0f0; }
        .neo-brutalism {
            box-shadow: 8px 8px 0px 0px rgba(0,0,0,1);
            border: 3px solid black;
        }
        .neo-btn:active {
            box-shadow: 2px 2px 0px 0px rgba(0,0,0,1);
            transform: translate(4px, 4px);
        }
    </style>
</head>
<body class="p-6 flex flex-col items-center min-h-screen">

    <header class="mb-10 text-center">
        <h1 class="text-4xl font-bold bg-yellow-300 p-4 neo-brutalism inline-block -rotate-2">
            QUIRKY SHARE ðŸš€
        </h1>
        <p class="mt-4 font-medium text-gray-700">Apple to Android, simplified.</p>
    </header>

    <main class="w-full max-w-md bg-white p-8 neo-brutalism space-y-6">
        <div class="space-y-4">
            <label class="block text-lg font-bold">Pick a file (Video, Image, PDF)</label>
            <input type="file" id="fileInput" class="w-full border-2 border-dashed border-black p-4 cursor-pointer hover:bg-purple-100 transition-colors">
        </div>

        <div id="progressContainer" class="hidden">
            <div class="w-full bg-gray-200 h-6 border-2 border-black">
                <div id="progressBar" class="bg-green-400 h-full transition-all duration-300" style="width: 0%"></div>
            </div>
            <p id="progressText" class="text-sm font-bold mt-2">Uploading...</p>
        </div>

        <button onclick="uploadFile()" id="uploadBtn" class="w-full py-4 bg-pink-400 font-bold text-xl neo-brutalism neo-btn uppercase tracking-tight">
            Generate Link
        </button>

        <div id="resultArea" class="hidden space-y-4">
            <div class="p-4 bg-blue-200 border-2 border-black">
                <p class="font-bold text-sm mb-2">Your Download Link:</p>
                <input type="text" id="shareLink" readonly class="w-full bg-white border-2 border-black p-2 text-sm">
            </div>
            <button onclick="copyLink()" class="w-full py-2 bg-yellow-200 font-bold border-2 border-black hover:bg-yellow-300">
                Copy to Clipboard
            </button>
        </div>
    </main>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js";
        import { getStorage, ref, uploadBytesResumable, getDownloadURL } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-storage.js";

        // TODO: Replace with your actual Firebase project config
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT.firebaseapp.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT.appspot.com",
            messagingSenderId: "YOUR_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        const app = initializeApp(firebaseConfig);
        const storage = getStorage(app);

        window.uploadFile = function() {
            const file = document.getElementById('fileInput').files[0];
            if (!file) return alert("Please select a file first!");

            const storageRef = ref(storage, 'uploads/' + Date.now() + '-' + file.name);
            const uploadTask = uploadBytesResumable(storageRef, file);

            document.getElementById('progressContainer').classList.remove('hidden');
            document.getElementById('uploadBtn').disabled = true;

            uploadTask.on('state_changed', 
                (snapshot) => {
                    const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                    document.getElementById('progressBar').style.width = progress + '%';
                }, 
                (error) => {
                    alert("Upload failed: " + error.message);
                }, 
                () => {
                    getDownloadURL(uploadTask.snapshot.ref).then((downloadURL) => {
                        document.getElementById('resultArea').classList.remove('hidden');
                        document.getElementById('shareLink').value = downloadURL;
                        document.getElementById('progressText').innerText = "Done! Share the link below.";
                    });
                }
            );
        }

        window.copyLink = function() {
            const copyText = document.getElementById("shareLink");
            copyText.select();
            document.execCommand("copy");
            alert("Link copied! Paste this in your Android browser.");
        }
    </script>
</body>
</html>
