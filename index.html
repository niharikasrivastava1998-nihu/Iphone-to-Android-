<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuirkyShare | No-Setup Swap</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Space+Grotesk', sans-serif; background-color: #e0e7ff; }
        .neo-brutalism {
            box-shadow: 8px 8px 0px 0px rgba(0,0,0,1);
            border: 4px solid black;
        }
        .neo-btn:active {
            box-shadow: 2px 2px 0px 0px rgba(0,0,0,1);
            transform: translate(4px, 4px);
        }
    </style>
</head>
<body class="p-6 flex flex-col items-center justify-center min-h-screen">

    <header class="mb-10 text-center">
        <h1 class="text-4xl font-bold bg-green-400 p-4 neo-brutalism inline-block rotate-1">
            QUIRKY SHARE ⚡
        </h1>
        <p class="mt-6 font-bold text-black uppercase tracking-widest">Apple ➔ Android Instant Transfer</p>
    </header>

    <main class="w-full max-w-md bg-white p-8 neo-brutalism space-y-6">
        <div class="space-y-4">
            <label class="block text-xl font-bold italic">Step 1: Feed the machine</label>
            <input type="file" id="fileInput" class="w-full border-4 border-black p-4 bg-yellow-50 cursor-pointer file:mr-4 file:py-2 file:px-4 file:border-2 file:border-black file:bg-pink-300 file:font-bold hover:bg-yellow-100 transition-all">
        </div>

        <div id="statusArea" class="hidden">
            <div class="w-full bg-gray-200 h-8 border-4 border-black">
                <div id="progressBar" class="bg-blue-500 h-full transition-all duration-300" style="width: 0%"></div>
            </div>
            <p id="statusText" class="text-sm font-bold mt-2 animate-pulse">Uploading to the cloud...</p>
        </div>

        <button onclick="handleUpload()" id="uploadBtn" class="w-full py-4 bg-orange-400 font-bold text-2xl neo-brutalism neo-btn uppercase">
            Get Download Link
        </button>

        <div id="resultArea" class="hidden space-y-4 pt-4 border-t-4 border-black border-dotted">
            <div class="p-4 bg-purple-200 border-4 border-black">
                <p class="font-bold text-sm mb-2 uppercase">Step 2: Send this to Android</p>
                <input type="text" id="shareLink" readonly class="w-full bg-white border-2 border-black p-3 font-mono text-xs">
            </div>
            <button onclick="copyLink()" class="w-full py-3 bg-yellow-300 font-bold border-4 border-black hover:bg-yellow-400 neo-btn">
                Copy Link
            </button>
            <p class="text-[10px] font-bold text-center text-red-600 uppercase">Link expires after 1 download or 14 days</p>
        </div>
    </main>

    <script>
        async function handleUpload() {
            const fileInput = document.getElementById('fileInput');
            const file = fileInput.files[0];
            
            if (!file) {
                alert("Yo! You forgot to pick a file.");
                return;
            }

            const btn = document.getElementById('uploadBtn');
            const status = document.getElementById('statusArea');
            const bar = document.getElementById('progressBar');
            
            btn.disabled = true;
            btn.innerText = "Processing...";
            status.classList.remove('hidden');
            bar.style.width = '30%';

            const formData = new FormData();
            formData.append('file', file);

            try {
                // Using File.io API (Free, No Auth needed)
                const response = await fetch('https://file.io', {
                    method: 'POST',
                    body: formData
                });

                if (!response.ok) throw new Error('Upload failed');

                const data = await response.json();
                bar.style.width = '100%';
                
                document.getElementById('statusText').innerText = "Upload Complete!";
                document.getElementById('resultArea').classList.remove('hidden');
                document.getElementById('shareLink').value = data.link;
                btn.innerText = "Done!";
                
            } catch (error) {
                alert("Error: " + error.message);
                btn.disabled = false;
                btn.innerText = "Try Again";
            }
        }

        function copyLink() {
            const copyText = document.getElementById("shareLink");
            copyText.select();
            copyText.setSelectionRange(0, 99999);
            navigator.clipboard.writeText(copyText.value);
            alert("Link copied! Open this link on the Android device.");
        }
    </script>
</body>
</html>
